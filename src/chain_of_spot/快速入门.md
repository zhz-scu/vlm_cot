# Chain-of-Spot 快速入门指南

## 🚀 5分钟上手 Chain-of-Spot

### 第一步：准备环境
确保你已经安装了必要的包：
```bash
pip install torch transformers pillow
```

### 第二步：准备测试图片
找一张包含多个物体的图片，比如：
- 一张有汽车、行人、建筑物的街景照片
- 一张有不同颜色和形状的几何图形图片
- 一张有多个物体的室内照片

### 第三步：运行第一个测试
```bash
cd src/chain_of_spot
python cos_inference.py \
  --image your_image.jpg \
  --question "图片中的红色汽车在哪里？" \
  --device mps
```

### 第四步：观察结果
你会看到：
1. **推理轨迹**：AI是如何思考的
2. **ROI区域**：AI找到的关键区域坐标
3. **最终答案**：详细的描述
4. **置信度**：AI对答案的信心程度

## 🎯 理解输出结果

### 示例输出
```
问题: 图片中的红色汽车在哪里？
ROI区域: [0.600,0.900,0.500,0.800]
最终答案: 红色汽车位于图像右下角，是一辆跑车...
置信度: 0.850

推理轨迹:
1. 指令1: 请识别图像中的关键区域
2. 响应1: 找到红色汽车在右下角
3. ROI区域: [0.600,0.900,0.500,0.800]
4. 指令2: 基于ROI区域详细分析
5. 最终答案: 红色汽车位于图像右下角...
```

### 结果解读
- **ROI区域**: `[x0,x1,y0,y1]` 表示关键区域的坐标
  - x0,x1: 水平方向的起始和结束位置（0-1）
  - y0,y1: 垂直方向的起始和结束位置（0-1）
- **置信度**: 0-1之间的数值，越高表示AI越有信心
- **推理轨迹**: 展示了AI的思考过程

## 🔍 尝试不同类型的问题

### 1. 位置问题
```
"图片中的红色汽车在哪里？"
"蓝色圆形在什么位置？"
"建筑物在图像的哪个部分？"
```

### 2. 特征问题
```
"红色汽车有什么特征？"
"这个物体的形状是什么？"
"图片中的主要颜色是什么？"
```

### 3. 细节问题
```
"图片右下角有什么？"
"中心区域的主要对象是什么？"
"左上角的物体是什么颜色？"
```

## 🎨 保存可视化结果

如果你想看到AI标记的区域，可以添加可视化选项：
```bash
python cos_inference.py \
  --image your_image.jpg \
  --question "分析这个物体的特征" \
  --save-roi-viz \
  --output-dir ./results
```

这会生成：
- `roi_visualization.png`: 带有ROI边界框的图片
- 推理结果的详细日志

## 📊 对比传统方法

### 传统方法的问题
```
问题: "图片中的红色汽车在哪里？"
回答: "图片中有一辆红色汽车。"
```
- 没有具体位置信息
- 描述不够详细
- 无法知道AI关注了哪个区域

### Chain-of-Spot的优势
```
问题: "图片中的红色汽车在哪里？"
回答: "红色汽车位于图像右下角，是一辆跑车，颜色鲜艳，与背景形成鲜明对比..."
```
- 提供精确位置坐标
- 详细的特征描述
- 完整的推理过程
- 可视化ROI区域

## 🛠️ 常用参数说明

| 参数 | 说明 | 示例 |
|------|------|------|
| `--image` | 输入图片路径 | `--image photo.jpg` |
| `--question` | 要问的问题 | `--question "红色汽车在哪里？"` |
| `--device` | 计算设备 | `--device mps` (Mac) / `--device cuda` (NVIDIA) |
| `--max-new-tokens` | 最大回答长度 | `--max-new-tokens 512` |
| `--save-roi-viz` | 保存ROI可视化 | `--save-roi-viz` |

## 🎯 最佳实践

### 1. 问题设计
- **具体明确**：不要说"这是什么"，而要说"红色汽车在哪里"
- **包含关键词**：在问题中提到颜色、形状、位置等特征
- **避免模糊**：不要问"图片怎么样"，要问具体的问题

### 2. 图片选择
- **清晰度**：选择清晰、对比度好的图片
- **复杂度**：包含多个物体的图片效果更好
- **大小**：建议图片尺寸在200x200像素以上

### 3. 结果分析
- **查看ROI**：确认AI找到的区域是否正确
- **检查置信度**：高置信度的结果更可靠
- **理解轨迹**：通过推理轨迹了解AI的思考过程

## 🚨 常见问题

### Q: ROI区域总是显示默认值怎么办？
A: 这可能是因为：
- 问题描述不够具体
- 图片中没有目标对象
- 模型无法识别目标特征

**解决方案**：
- 使用更具体的问题描述
- 确保图片中有目标对象
- 尝试不同的关键词

### Q: 推理速度很慢怎么办？
A: 可以尝试：
- 使用更小的图片
- 减少 `--max-new-tokens` 参数
- 使用更快的设备（如GPU）

### Q: 结果不准确怎么办？
A: 可以尝试：
- 重新描述问题
- 使用更清晰的图片
- 调整问题关键词

## 🎉 恭喜！

你已经成功入门 Chain-of-Spot！现在你可以：

1. **继续探索**：尝试不同类型的问题和图片
2. **深入学习**：阅读技术文档了解原理
3. **实际应用**：将Chain-of-Spot应用到你的项目中
4. **分享经验**：与其他用户交流使用心得

记住，Chain-of-Spot 的核心优势是"先定位，再分析"，这让AI能够像人类一样进行精确的视觉推理！

---

**开始你的 Chain-of-Spot 之旅吧！** 🚀
